<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>整体情况分析-Detail</title>
</head>
<body>
	<div class="overall-detail">
		<div class="overall-detail-left grayborder">
			<div class="overall-title">分局企业综合指数</div>
			<div id="gyBranchBar" style="width:100%;height: 400px;"></div>
		</div>	
		<div class="overall-detail-right grayborder">
			<div class="overall-title">企业风险分析图</div>
			<div id="gypieBranch" style="width:100%;height: 400px;"></div>
		</div>	
		
		<div style="clear: both;"></div>
		<div class="riskTable grayborder">
			<div class="overall-title">风险企业名单</div>
			<table id="riskTable">
				<thead>
					<th colspan="2">风险名单名录</th>
					<th>风险值</th>	
					<th>模块一</th>
					<th>模块二</th>
					<th>模块三</th>
					<th>模块四</th>
					<th>模块五</th>
				</thead>
				<tbody>
					
				</tbody>
			</table>
		</div>
	</div>
<script type="text/javascript">
	var barBranchObject;
	var pieBranchObject;
	
	initDetail();

	function initDetail(){
		barBranchObject =  echarts.init(document.getElementById('gyBranchBar'));
		pieBranchObject =  echarts.init(document.getElementById('gypieBranch'));
		
		//柱状图
		createBar({
			label:["一分局","二分局","三分局","四分局","五分局","六分局","七分局","八分局"],
			data:[randomData(100),randomData(100),randomData(100),randomData(100),randomData(100),randomData(100),randomData(100),randomData(100)]
		});
		BarEventDetail(); //柱状图 点击事件
		
		createPie(); //拼图

		pieEventDetail();//拼图 点击事件
		
		createTable()//风险企业名单表格
	}

	//生成柱状图
	function createBar(params){
		var option = {
		    tooltip : {
		        trigger: 'axis',
		        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
		            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
		        }
		    },
		    grid: {
		    	top:'15%',
		        left: '3%',
		        right: '4%',
		        bottom: '3%',
		        containLabel: true
		    },
		    color: ['#399ad8'],
		    xAxis : [
		        {
		            type : 'category',
		            data : params.label,
		            axisTick: {
		                alignWithLabel: true
		            }
		        }
		    ],
		    yAxis : [
		        {
		            type : 'value',
		            max:100
		        }
		    ],
		    series : [
		        {
		            name:'指数',
		            type:'bar',
		            barWidth: '40%',
		            data:params.data,
		            markPoint: {
		                data: [
		                    {type: 'max', name: '最大值'},
		                    {type: 'min', name: '最小值'}
		                ],
		                symbolSize:50
		            }
		        }
		    ]
		};
		barBranchObject.setOption(option);
	}	
	//柱状图 点击事件
	function BarEventDetail(){
		barBranchObject.on("click",function(params){
			createPie();
		});
	}
	//拼图
	function createPie(){
		var option = {
		    tooltip : {
		        trigger: 'item',
		       formatter: "{a} <br/>{b} : {c} ({d}%)"
		    },
		    legend: {
        		left: 'right',
		        data:['80以上','60-80','60以下']
		    },
		    series : [
		        {
		            name:'指数',
		            type:'pie',
		            radius : '65%',
            		center: ['50%', '50%'],
		            label: {
		                normal: {
		                    show: true
		                },
		                emphasis: {
		                    show: true
		                }
		            },
		            lableLine: {
		                normal: {
		                    show: true
		                },
		                emphasis: {
		                    show: true
		                }
		            },
		            itemStyle: {
		                emphasis: {
		                    shadowBlur: 10,
		                    shadowOffsetX: 0,
		                    shadowColor: 'rgba(0, 0, 0, 0.5)'
		                }
		            },
		            data:[
		                {value:randomData(100), name:'80以上'},
		                {value:randomData(100), name:'60-80'},
		                {value:randomData(100), name:'60以下'}
		            ]
		        }
		    ]
		};
		pieBranchObject.setOption(option);
	}

	//拼图 点击事件
	function pieEventDetail(){
		pieBranchObject.on("click",function(params){
			createTable();
		});
	}
	//风险企业名单表格
	function createTable(){
		var str = "";
		for (var i = 1; i < 11; i++) {
			str += "<tr>";
			str += "<td>" + i + "</td>";
			str += "<td>" + "贵阳XXXX"+randomData(1000000)+"公司" + "</td>";
			str += "<td>" + randomData(100)+ "</td>";
			str += "<td>" + randomData(80)+ "%</td>";
			str += "<td>" + randomData(10000)+ "</td>";
			str += "<td>" + randomData(1000)+ "</td>";
			str += "<td>" + randomData(10000)+ "</td>";
			str += "<td>" + randomData(80)+ "%</td>";
			str += "</tr>";
		}
		$("#riskTable tbody").html(str);
	}
</script>
</body>
</html>