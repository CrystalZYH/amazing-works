<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>企业指数下钻分析</title>
</head>
<body>
<div class="company_data">
	<div class="overall-title">企业指数下钻分析</div>
	<ul class="gy_search">
  		<li>日期：<input type="text" placeholder="请选择日期" class="Wdate" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',readOnly:true})"></li>
  		<li>地区：
  			<select class="easyui-combobox" style="width: auto;height: 32px;"><option>=请选择=</option><option>云岩区</option><option>南明区</option><option>小河区</option><option>金阳新区</option></select>
  		</li>
  		<li>行业：
  			<select class="easyui-combobox" style="width: auto;height: 32px;"><option>=请选择=</option><option>互联网</option><option>大数据</option></select>
  		</li>
  		<li>识别号：<input type="text" placeholder="请输入识别号" class="identify_num"></li>
  		<li><span class="search" onclick="searchData()">查询</span></li>
  	</ul>
	<div id="echart_cd" style="width: 100%;height: 350px;"></div>
	<div style="overflow: hidden;">
		<div id="echart_cd1" style="width: 33%;height: 250px;float: left;"></div>
		<div id="echart_cd2" style="width: 33%;height: 250px;float: left;"></div>
		<div id="echart_cd3" style="width: 33%;height: 250px;float: left;"></div>
	</div>
</div>
	
<script type="text/javascript">
	var myChart,myChart1,myChart2,myChart3;
	function randomData(num) {
	    return Math.round(Math.random()*num);
	}
    
    $(function(){
		init();//初始化
	});

    function init(){
    	// 基于准备好的dom，初始化echarts实例
    	var myChart = echarts.init(document.getElementById("echart_cd"));
    	var myChart1 = echarts.init(document.getElementById("echart_cd1"));
    	var myChart2 = echarts.init(document.getElementById("echart_cd2"));
    	var myChart3 = echarts.init(document.getElementById("echart_cd3"));

    	//data
    	var data1 = [{text: '企业发展指数', max: 200},{text: '纳税信用指数', max: 200},{text: '税收风险指数', max: 200}];
    	var data1_d = [randomData(200),randomData(200),randomData(200)];

    	var data21 = [{text: '交易活跃指数', max: 200},{text: '发展潜力指数', max: 200},{text: '税收发展指数', max: 200}];
    	var data21_d = [randomData(200),randomData(200),randomData(200)];

    	var data31 = [{text: '月开票次数', max: 200},{text: '月收票次数', max: 200},{text: '月开票单张金额均值', max: 200},{text: '月收票单张金额均值', max: 200},{text: '月户进开票数', max: 200},{text: '存货周转率', max: 200},{text: '应收账', max: 200},{text: '流动资产', max: 200}];
    	var data31_d = [randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200)];

    	createRadar(myChart,data1,data1_d);
	    createRadarSmall(myChart1,data1,data1_d,'#15d272');
	    createRadarSmall(myChart2,data21,data21_d,'#df9d29');
	    createRadarSmall(myChart3,data31,data31_d,'#14b8d6');

	    myChart1.on("click", function () {
	    	var data21 = [{text: '交易活跃指数', max: 200},{text: '购买指数', max: 200},{text: '发展潜力指数', max: 200},{text: '税收发展指数', max: 200}];
	    	var data21_d = [randomData(200),randomData(200),randomData(200),randomData(200)];
	    	var data31 = [{text: '月开票次数', max: 200},{text: '月收票次数', max: 200},{text: '月开票单张金额均值', max: 200},{text: '月收票单张金额均值', max: 200},{text: '存货周转率', max: 200},{text: '应收账', max: 200}]
    		var data31_d = [randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200)];
	    	createRadarSmall(myChart2,data21,data21_d,'#df9d29');
	    	createRadarSmall(myChart3,data31,data31_d,'#14b8d6');
		});

		myChart2.on("click", function () {
	    	var data31 = [{text: '月开票次数', max: 200},{text: '月收票次数', max: 200},{text: '月开票单张金额均值', max: 200},{text: '月收票单张金额均值', max: 200},{text: '月户进开票数', max: 200},{text: '存货周转率', max: 200},{text: '应收账', max: 200},{text: '流动资产', max: 200}]
    		var data31_d = [randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200),randomData(200)];
	    	createRadarSmall(myChart3,data31,data31_d,'#14b8d6');
		});
    }

    function searchData(){
		init();
	}

    //生成雷达图
    function createRadar(para,data_1,data_2){
    	// 指定图表的配置项和数据
    	var option = {
    	    title: {
    	    	show: false
    	    },
    	    tooltip: {
    	        trigger: 'axis'
    	    },
    	    legend: {
    	    	show: false
    	    },
    	    radar: [
    	        {
    	            indicator: data_1,
    	            center: ['50%','60%'],
    	            radius: 120,
    	            name: {
                        textStyle: {
                            color:'#333'
                        }
	                }
    	        }
    	    ],
    	    series: [
    	        {
    	            type: 'radar',
    	             tooltip: {
    	                trigger: 'item'
    	            },
    	            itemStyle: {
    	            	normal: {
    	            		areaStyle: {type: 'default'}
    	            	}
    	            },
    	            data: [
    	                {
    	                    value: data_2,
    	                    name: '201604'
    	                }
    	            ]
    	        }
    	    ]
    	};
    	para.setOption(option); // 使用刚指定的配置项和数据显示图表。
    }

    //生成雷达图
    function createRadarSmall(para,data_1,data_2,color){
    	// 指定图表的配置项和数据
	    var option = {
	        title: {
	        	show: false
	        },
	        tooltip: {
	            trigger: 'axis'
	        },
	        legend: {
	        	show: false
	        },
	        radar: [
	            {
	                indicator: data_1,
	                radius: 80,
	                name: {
                        textStyle: {
                            color:'#333'
                        }
	                }
	            }
	        ],
	        //silent: true,
	        series: [
	            {
	                type: 'radar',
	                itemStyle: {
	                	normal: {
	                		color: color
	                	}
	                },
	                data: [
	                    {
	                        value: data_2,
	                        name: '201604'
	                    }
	                ]
	            }
	        ]
	    };
	    para.setOption(option); // 使用刚指定的配置项和数据显示图表。
	}
</script>
</body>
</html>